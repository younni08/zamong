import React,{useEffect, useState} from "react";
import { Redirect } from "react-router";

const Map_korea = (props) => {
    const [goto,setGoto] = useState("")
    const [redirect,setRedirect] = useState(false)
    const handleMap = (e) => {
        let getid = e.currentTarget.getAttribute("id")
        if(getid==="state41"||getid==="state42"){
            getid="state4"
        }
        setGoto(getid)
    }

    useEffect(()=>{
        if(props.kstate===null||props.kstate===undefined) return 0
        console.log(props)
        for(let i=0;i<props.kstate.length;i++){
            if(props.kstate[i].shop_cnt>0){
                document.getElementById(props.kstate[i].state_name).classList.replace('st0','st1')
            }
            if(props.kstate[i].shop_cnt>10){
                document.getElementById(props.kstate[i].state_name).classList.replace('st0','st2')
            }
            if(props.kstate[i].shop_cnt>100){
                document.getElementById(props.kstate[i].state_name).classList.replace('st0','st3')
            }
        }
    },[props])

    useEffect(()=>{
        if(goto==="") return 0
        setRedirect(true)
    },[goto])

    return (
        <div className="map_korea">
            {
                redirect?<Redirect to={"/state?s="+goto} />:""
            }
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 595.28 841.89" xmlSpace="preserve">
                    {/* 강원도 */}
                <polygon onClick={handleMap} id="state1" className="st0" points="192.12,76.26 211.57,95.26 241.26,102.45 241.26,115.89 270.09,130.37 252.75,148.76 252.75,179.96 
                    268.9,177.23 275.34,187.98 296.97,191.84 287.14,203.63 280.19,232.29 284.66,246.72 277.84,257.71 284.69,263.04 302.17,260.13 
                    306.63,245.53 343.89,245.53 359.24,253.3 353.42,263.1 385.57,263.1 395.6,271.83 415.66,266.13 425.3,279.63 437.58,273.81 
                    463.66,263 472.8,273.31 496.78,253.46 473.43,207.48 432.63,145.92 379.12,70.11 379.07,69.98 358.54,15.18 350.49,15.18 
                    346.13,42.26 315.73,75.29 290.82,64.73 246.36,67.69 224.18,64 202.3,69.1 "/>

                    {/* 경기도 */}
                <path onClick={handleMap} id="state2" className="st0" d="M114.54,188.03l3.91,8.74l3.36-8.59l18.06-11.1l12.83,11.41l-1.18,6.35l8.99,0.03l0.73-7.33l15.81-8.8
                    l12.82-7.33l17.95,31.11l-0.53,0.56c-0.04,0.04-4.05,4.33-8.43,8.41c-8.17,7.62-10.66,8.13-12.01,7.63
                    c-1.24-0.46-3.58-0.07-5.83,0.31c-1.76,0.3-3.55,0.6-5.18,0.6c-1.52,0-2.9-0.26-3.99-1.03c-2.45-1.73-8.38-0.48-10.46,0.15
                    l-0.68,0.2l-10.97-14.96l-0.12,0.62v16.57H129.6l6.51,13.51l20.36,9.06l-20.09,8.94v8.91h15.4l-4.96,16.11l19.23,20.36l31.06-8.04
                    l20.42,13.9l24.57-26.85l0.13-0.08l33.49-20.2l6.69-10.77l-4.36-14.07l0.07-0.28l7.13-29.4l7.85-9.42l-19.03-3.4l-6.19-10.34
                    l-17.18,2.9v-34.48l15.99-16.96l-27.48-13.8v-13.08l-28.65-6.95L190.5,77.58l-35.69,34.97l-10.59,28.25l-15.75,20.59h-23.28
                    l-14.12-10.59l-23.62,2.15l22.18,27.34L114.54,188.03z"/>

                    {/* 경상남도 */}
                <path onClick={handleMap} id="state3" className="st0" d="M423.59,594.82l8.66-11.55l10.77-4.49l19.33-13.18l20.19-15.72l-9.55-4.66l-22-19.25l6.33-9.64l-18.92-2.7
                    l-7.62,7.81l-36.67,7.52l-12.09-15.39h-17.89h-28.31l10.9-10.9l-15.05-22.85l-28.56,6.55l-3.78-14.2L271.6,498.1l-7.36,19.04v20.89
                    l5.32,20.5l-11.36,8.34l3.32,12.95l20.3,30.52l4.47,11.55l0.08-0.05l10.54,34.64l15-1.3l-5-18.56l15.21-22.64l4.78,9.21v10.6
                    l25.14,6.98l5.18-10.36l11.26,2.6v8.85l21.73,3.62l0.24,0.24c0.87,0.87,8.47,8.61,8.47,13.36c0,0.01,0,0.02,0,0.03
                    c1.28,0.61,8.46-2.38,15.68-6.54l-2.74-32.19l-15.89,13.82l-21.15-3.13l-3.33-9.99l8.58-13.26l10.31-5.55l13.61,5.44l-4.84-31.47
                    l13.67,19.14l14.74,20.33l6.82-9.95L423.59,594.82z"/>

                    {/* 경상북도 */}
                <path onClick={handleMap} id="state4" className="st0" d="M525.29,455.41l4.07-16.29l-17,2.72l-12.45,1.66l2.34-25.75V382.9l1.48-43.79l-2.96-52.63l-3.49-30.73
                    l-24.69,20.44l-9.49-10.71l-24.66,10.23l-13.81,6.54l-9.8-13.72l-18.88,5.36l-23.85,27.76v18.18L349,306.92l-23.33,16.4l-33.64,22.7
                    v14.57l3.99,36.79l9.04,11.35l13.18-5.65l-0.99,18.76l-21.11,30.24l8.46,31.82l28.01-6.42l16.77,25.47l-8.55,8.55h24.22l11-24.53
                    l-7.22-12.41l12.86-12.16l6.32-11.39l29.63-8.69l8.54,23.72l-11.68,9.21v20.83l-6.98,9.48l-12.35-8.38
                    c-2,2.89-8.47,12.16-11.28,15.4l11.07,14.08l34.78-7.13l7.91-8.1l20.93,2.99l11.78-17.95h17.17l6.03,14.64l19.47-9.74l3.22,8.3
                    L525.29,455.41z"/>
                    {/* 울릉도 */}
                <polygon onClick={handleMap} id="state41" className="st0" points="543.41,226.79 535.95,211.16 523.17,216.14 529.56,226.79 "/>
                    {/* 독도 */}
                <polygon onClick={handleMap} id="state42" className="st0" points="536,246.57 543.41,246.57 543.41,239.46 533.29,241.97 "/>

                    {/* 광주 */}
                <path onClick={handleMap} id="state5" className="st0" d="M139.1,609.9l14.5,4.95l15.21-4.9l11.79-19.54c-8.49-10.31-15.25-16.69-16.81-16.84l-19.51,13.01l-4.94-11.64 l-12.73,23.98L139.1,609.9z"/>

                    {/* 대구 */}
                <path onClick={handleMap} id="state6" className="st0" d="M394.05,495.14l0.59-0.85l12.4,8.42l5.39-7.32v-21.16l11.3-8.91l-7.37-20.47l-26.94,7.89l-6.06,10.92 l-0.12,0.11l-11.78,11.14l6.93,11.91l-11.05,24.66h14.74C385,508.29,393.96,495.28,394.05,495.14z"/>

                    {/* 대전 */}
                <polygon onClick={handleMap} id="state7" className="st0" points="212.09,411.28 222.34,419.95 230.61,408 237.09,420.04 245.37,415.14 245.37,391.62 254.63,387.76 
                    232.32,375.32 227.66,378.55 218.95,384.57 218.95,384.57 212.09,389.32 "/>

                    {/* 서울 */}
                <path onClick={handleMap} id="state8" className="st0" d="M167.93,216.04c1.88,0,3.76,0.31,5.12,1.27c1.56,1.1,4.78,0.56,7.63,0.08c2.64-0.44,5.14-0.86,6.9-0.21
                    c1.6,0.39,9.61-6.39,17.67-14.95l-16.14-27.98l-11.03,6.3l-14.87,8.27l-0.81,8.13l-11.26-0.04l-0.91,4.88l11.25,15.16
                    C162.72,216.64,165.33,216.04,167.93,216.04z"/>

                    {/* 세종시 */}
                <polygon onClick={handleMap} id="state9" className="st0" points="231.22,373.55 231.22,361.07 220.79,350.49 220.71,350.32 215.83,339.75 204.66,344.59 213.33,357.39 220.15,381.21 "/>

                    {/* 울산 */}
                <polygon onClick={handleMap} id="state10" className="st0" points="500.76,540.39 515.6,532.97 515.6,513.76 511.91,504.24 492.48,513.96 486.14,498.54 471.48,498.54 
                    453.73,525.6 474.15,543.47 484.37,548.46 484.37,548.46 500.76,556.44 "/>

                    {/* 인천 */}
                <polygon onClick={handleMap} id="state11" className="st0" points="123.5,189.59 119.64,199.43 128.62,219.51 147.55,219.51 147.56,204.73 150.44,189.27 139.64,179.66 "/>

                    {/* 부산 */}
                <polygon onClick={handleMap} id="state12" className="st0" points="446.72,609.61 483.18,581.17 492.81,564.87 499.96,558.37 484.63,550.89 463.55,567.3 444.02,580.62 433.58,584.97 426.33,594.64 436.33,604.76 "/>

                {/* 전라남도 */}
                <path onClick={handleMap} id="state13" className="st0" d="M279.95,611.3l-20.37-30.62l-3.49-13.63l-9.8-7.7l-15.67,8.14h-49.78V548.7l-10.15,10.59l-0.62-0.2
                    c-0.42-0.13-10.34-3.37-11.32-9.25c-0.6-3.63-6.81-7.76-9.92-9.49l-8.34,9.71v22.25l4.73,11.14l17.52-11.68
                    c1.16-0.77,3.11-0.83,11.61,8.33c4.28,4.61,8.29,9.5,8.33,9.55l0.46,0.57l-12.95,21.47l-16.61,5.35l-15.55-5.31l-14.03-12.35
                    l13.9-26.18l-19.18-4.76l-8.08,5.71l-10.35-29.17l-5.68,18.47l-0.09,0.13l-15.84,22.7l13.25,10.6l1.17,14.09l-9.28,7.99
                    l-17.79,21.35l12.33,8.9l24.4,7.87l-9.57,10.44h-7.6l6.09,6.09h15.46v9.5H95.29c-1.88,1.32-5.96,4.83-5.96,7.87
                    c0,3.62,4.84,6.88,5.4,7.25l16.97,7.71l-2.96,22.23l11.46,4.49c2.96-9.98,6.42-20.37,6.46-20.48l0.14-0.42l7.86-3.79l13.74-19.49
                    l0.86,1.12c0.8,1.04,7.75,10.31,5.3,15.2c-0.25,0.5-0.27,0.96-0.05,1.45c0.86,1.96,4.94,3.65,6.97,4.32l37.48-41.15l11.72-10.94
                    l13.77,8.61l-14.1,11.75c-0.05,1.98-0.43,8.52-3.38,10.73c-2.35,1.76-6.12,4.47-7.58,5.52c0.63,1.7,3.09,6.34,11.55,7.46
                    c9.12,1.22,16.83,1.94,19.22,2.15l6.61-16.88l0.56-0.11c3.41-0.68,8.62-2.29,9.52-3.71c0.09-0.14,0.07-0.19,0.07-0.22
                    c-0.51-2.06-8.64-15.15-13.97-23.45l-0.18-0.28l0.79-16.56l15.01-6.65l9.32,25.72v13.57l9.49,3.65v-15.04l1.52,0.78
                    c4.54,2.34,9.98,4.62,11.91,4.8c-1.92-3.06-13.21-14.14-23.91-23.89l-0.53-0.49l4.93-12.33l0.55-0.11
                    c6.92-1.38,14.88-3.59,15.67-4.75c1.29-1.94,5.31-4.67,7.01-5.78L279.95,611.3z"/>

                    {/* 전라북도 */}
                <path onClick={handleMap} id="state14" className="st0" d="M269.83,496.9l28.9-27.03l-4.59-17.29l-21.24-10.55l-3.79,14.32l-12.09-3.41l-10.57,3.19l-17.22-3.44
                    l1.88-17.86H217.8l-25.68,6.08l-10.71-12.22h-11.39l-12.24,15.74l-21.91,8.33l-13.68,11.14l5.2,9.77h32l-19.86,7.81l11.95,17.33
                    l-20.21-6.74l-9.71,15.44l-0.31,0.13c-8.1,3.26-16.96,7.27-18.33,8.57c0.14,1.22,1.15,4.36,1.91,6.5l25.05,4.77l-2.34,1.4
                    c-0.34,0.2-8.4,5.02-13.43,6.13c-3.91,0.87-10.6,5.54-12.65,7.02l10.22,28.81l6.62-4.67l20.11,4.98v-21.9l9.92-11.55l0.73,0.38
                    c0.44,0.23,10.79,5.61,11.74,11.39c0.59,3.57,6.43,6.37,9.29,7.4l12.82-13.38v21.88h47.19l16.41-8.53l10.51,8.26l10.16-7.45
                    l-5.03-19.4v-21.54L269.83,496.9z"/>

                    {/* 제주도 */}
                <polygon onClick={handleMap} id="state15" className="st0" points="116.75,768.5 83.72,785.02 57.3,801.53 57.3,818.04 87.03,827.95 129.96,821.35 155.96,803.94 166.29,770.7 156.38,764.1 "/>

                    {/* 충청북도 */}
                <polygon onClick={handleMap} id="state17" className="st0" points="324.49,321.6 348.88,304.46 370,316.29 370,300.88 393.88,273.09 384.79,265.18 349.77,265.18 
                    356.32,254.16 343.39,247.61 308.17,247.61 303.78,261.97 284.14,265.24 276.39,259.22 243.42,279.1 219.07,305.71 233.6,322.42 
                    225.71,332.96 217.66,338.74 222.52,349.28 233.3,360.22 233.3,373.49 259.39,388.03 247.45,393.01 247.45,415.12 257.85,420.75 
                    263.15,434.88 294.68,450.54 315.21,421.13 315.99,406.3 304.43,411.26 294.02,398.2 289.95,360.64 289.95,344.91 "/>

                    {/* 충남 */}
                <path onClick={handleMap} id="state16" className="st0" d="M73.3,336.56l14.09,42.27h11l-4.81-27.64l16.5,5.5l1.2,29.9l11.27,14.84l-13.4,5.05l6.76,24.78l19.7,19.41
                    l20.89-7.95L169,426.63h13.35l10.51,11.98l24.7-5.85h15.86l-1.92,18.27l14.85,2.96l10.65-3.21l10.64,3L271,441.1l-9.51-4.72
                    l-5.31-14.16l-9.75-5.28l-10.15,6l-5.9-10.95l-7.64,11.04l-12.73-10.77v-24.01l8.34-5.77l-6.93-24.18l-9.89-14.6l14.31-6.2l8.4-6.03
                    l6.69-8.94l-13.95-16.04l-20.27-13.8l-30.55,7.9l-13.52,9.83l-17.99-17.09l-22.15-18.4l-21.14,12.24l4.71,22.37l-21.93,14.66
                    l-4.57-22.1c-2.95,3.95-9.76,13.09-11.57,15.81c-1.82,2.73-4.43,9.25-5.41,11.76L73.3,336.56z"/>
            </svg>
        </div>
    )
}

export default Map_korea;